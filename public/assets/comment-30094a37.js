import{_ as z,q as F,f as d,o as r,c as m,h,F as k,i as $,v as y,E as S,d as e,t as c,a as b,p as M,b as B}from"./index-f97316e7.js";import{I as D}from"./icon-1273f975.js";const C=u=>(M("data-v-8b57bf71"),u=u(),B(),u),H={key:0,class:"comment-list"},N=C(()=>e("dt",{class:"comment-title"},"精彩评论",-1)),V=["href"],E=["src"],L={class:"nickname"},U={class:"comment-content"},Y={class:"comment-bottom"},j=["textContent"],q={class:"liked"},O={key:1,class:"comment-list"},R=C(()=>e("dt",{class:"comment-title"},"最新评论",-1)),A=["href"],G=["src"],J={class:"nickname"},K={class:"comment-content"},P={class:"comment-bottom"},Q=["textContent"],W={class:"liked"},X={__name:"comment",setup(u){const g=F();let p=d(0),f=d([]),i=d([]),I=d(0),_=d(!0);function x(){S(g.params.id,p.value).then(a=>{f.value=a.hotComments,i.value=a.comments,I.value=a.total,_.value=!1})}function w(a){if(_.value)return;const{scrollTop:o,scrollHeight:t,offsetHeight:s}=a.target;o+s>=t-100&&(_.value=!0,p.value++,T())}function T(){S(g.params.id,p.value).then(a=>{i.value=[...i.value,...a.comments],_.value=!1})}x();function v(a){let o;const t=new Date(a),s={year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),hours:t.getHours(),minutes:t.getMinutes()},l=new Date,n=l.getTime()-a;return s.date===l.getDate()&&n<1e4?o="刚刚":s.date===l.getDate()&&n<6e4?o=`${Math.floor(n/1e3)}秒前`:s.date===l.getDate()&&n>6e4&n<36e5?o=`${Math.floor(n/6e4)}分钟前`:s.date===l.getDate()&&n<864e5?o=`${s.hours.toString().padStart(2,0)}:${s.minutes.toString().padStart(2,0)}`:s.date!==l.getDate()&&n<864e5?o=`昨天 ${s.hours.toString().padStart(2,0)}:${s.minutes.toString().padStart(2,0)}`:s.year===l.getFullYear()?o=`${s.month+1}月${s.date}日`:o=`${s.year}年${s.month+1}月${s.date}日`,o}return(a,o)=>(r(),m("div",{class:"comment",onScroll:o[0]||(o[0]=t=>w(t))},[h(f).length>0?(r(),m("dl",H,[N,(r(!0),m(k,null,$(h(f),t=>(r(),m("dd",{key:t.commentId,class:"comment-item"},[e("a",{target:"_blank",href:`https://music.163.com/#/user/home?id=${t.user.userId}`},[e("img",{src:`${t.user.avatarUrl}?param=50y50`,class:"avatar"},null,8,E),e("span",L,c(t.user.nickname),1)],8,V),e("p",U,c(t.content),1),e("div",Y,[e("span",{textContent:c(v(t.time))},null,8,j),e("span",q,[b(D,{size:20,type:"zhan"}),e("span",null,c(t.likedCount),1)])])]))),128))])):y("",!0),h(i).length>0?(r(),m("dl",O,[R,(r(!0),m(k,null,$(h(i),t=>(r(),m("dd",{key:t.commentId,class:"comment-item"},[e("a",{target:"_blank",href:`https://music.163.com/#/user/home?id=${t.user.userId}`},[e("img",{src:`${t.user.avatarUrl}?param=50y50`,class:"avatar"},null,8,G),e("span",J,c(t.user.nickname),1)],8,A),e("p",K,c(t.content),1),e("div",P,[e("span",{textContent:c(v(t.time))},null,8,Q),e("span",W,[b(D,{size:20,type:"zhan"}),e("span",null,c(t.likedCount),1)])])]))),128))])):y("",!0)],32))}},et=z(X,[["__scopeId","data-v-8b57bf71"]]);export{et as default};
